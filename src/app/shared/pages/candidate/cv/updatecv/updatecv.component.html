<div class="min-h-screen bg-[#fafafa] text-gray-800 font-sans" (click)="openedMenuIndex = null;">
  <!-- Navigation -->
  <nav class="flex items-center justify-between max-w-6xl mx-auto px-4 py-2 ">
    <!-- Left group (Dropdown + Tabs) -->
    <div class="flex items-center gap-4">
      <!-- Dropdown -->


      <!-- Tabs -->
      <div class="flex items-center gap-1 bg-[#ffffff] border border-[#edeef7] rounded-md px-1 py-1">
        <button *ngFor="let section of sections" (click)="switchSection(section.value)" [ngClass]="{
                'bg-[#8B5CF6] text-white': currentSection === section.value,
                'text-gray-600 hover:bg-[#8B5CF6] hover:text-white': currentSection !== section.value
              }" class="px-3 py-1 text-xs font-bold rounded-md uppercase tracking-wide transition-colors">
          {{ section.label }}
        </button>
      </div>
    </div>

    <!-- Right group -->
    <div class="flex items-center gap-1 bg-[#ffffff] border border-[#edeef7] rounded-md px-1 py-1">
      <button class="hover:bg-[#8B5CF6] hover:text-white px-3 py-1 text-xs font-bold rounded-md uppercase tracking-wide transition-colors" (click)="exportCv()">FINISH UP & PREVIEW</button>
      <button class="hover:bg-[#8B5CF6] hover:text-white px-3 py-1 text-xs font-bold rounded-md uppercase tracking-wide transition-colors">AI COVER LETTER</button>
    </div>
  </nav>

  <!-- Content Sections -->
  <div class="max-w-6xl mx-auto px-4">
   

    <!-- Contact Section -->
    <section *ngIf="currentSection === 'contact'" class="py-10 transition-all duration-300 ease-in-out">
      <div class="bg-[#ffffff] p-8 rounded-md border border-[#eff0fa]">

        <!-- Upload photo d'identit√© -->
        <div class="mb-6">
          <label class="block text-sm font-medium mb-1">PHOTO D'IDENTIT√â</label>
          <div class="flex items-center gap-4">
            <!-- Aper√ßu si image s√©lectionn√©e -->
            <img *ngIf="photoPreview" [src]="photoPreview" alt="Aper√ßu photo"
              class="w-16 h-16 object-cover rounded-full border-2 border-[#8B5CF6] shadow-md transition" />
            <label
              class="cursor-pointer px-4 py-2 bg-[#8B5CF6] hover:bg-[#372464] text-white rounded-lg text-xs font-semibold transition">
              S√©lectionner une photo
              <input type="file" accept="image/*" class="hidden" (change)="onPhotoSelected($event)" />
            </label>
          </div>
          <p class="text-xs text-gray-400 mt-1">Formats accept√©s¬†: JPG, PNG, GIF ‚Äì 2 Mo max.</p>
        </div>



        <div class="grid grid-cols-2 gap-6">
          <div>
            <label class="block text-sm mb-1 font-bold">FULL NAME</label>
            <input [(ngModel)]="fullName" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="Full Name">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">EMAIL ADDRESS</label>
            <input [(ngModel)]="email" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="Email">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">PHONE NUMBER</label>
            <input [(ngModel)]="phone" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="Phone">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">LINKEDIN URL</label>
            <input [(ngModel)]="linkedin" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="https://linkedin.com/in/username">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">PERSONAL WEBSITE</label>
            <input [(ngModel)]="website" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="https://yourwebsite.com">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">Title</label>
            <input [(ngModel)]="title" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="votre profile">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">COUNTRY</label>
            <input [(ngModel)]="country" class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="Country">
          </div>
          <div>
            <label class="block text-sm mb-1 font-bold">STATE</label>
            <input [(ngModel)]="state" class="w-full  bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
              placeholder="State">
          </div>
        </div>
        <div class="mt-6 text-right">
          <button class="px-6 py-3 rounded-md bg-[#8B5CF6] hover:bg-[#372464]  font-extrabold text-white text-xs  transition">SAVE BASIC INFO</button>
        </div>
      </div>
    </section>

    <!-- Experience Section -->
    <div class="max-w-6xl mx-auto px-4">


      <!-- Experience Section with Sidebar -->
      <section *ngIf="currentSection === 'experience'" class="py-10 max-w-6xl mx-auto px-4">
        <div class="flex gap-6">

          <!-- Left Sidebar -->
          <div class="w-64">
            <div class="bg-[#ffffff] rounded-2xl border border-[#d9dcf0]  p-4 space-y-4">
              <div class="text-center border-b border-[#d9dcf0] pb-4">
                <div class="text-2xl font-bold text-[#8B5CF6]">0</div>
                <div class="text-xs text-[#B0B3C7]">Your Rezi Score</div>
                <div class="text-[11px] text-[#999CA7]">Needs improvement</div>
              </div>

              <div>
                <div class="flex justify-between items-center text-sm font-medium text-gray-600 mb-2">
                  <span>Your Experience</span>
                  <button (click)="addExperience()" class="bg-[#8B5CF6] px-2 py-1 text-white rounded">+</button>
                </div>
              
                <div class="space-y-2">
                  <div *ngFor="let exp of experiences; let i = index"
                       class="flex justify-between items-center px-3 py-2 rounded-lg cursor-pointer"
                       [ngClass]="{
                         'bg-[#8B5CF6] text-white': currentExperienceIndex === i,
                         'bg-[#ffffff] text-gray-900 hover:bg-[#f1f2f8]': currentExperienceIndex !== i
                       }">
                
                    <!-- Experience Content Click (Select) -->
                    <div (click)="selectExperience(i)" class="flex-1">
                      <div class="text-sm font-medium">{{ exp.title  || 'Experience ' + (i + 1) }}</div>
                      <div class="text-xs">{{ exp.company || 'details' }}<span *ngIf="exp.start_date">, {{exp.start_date}} - {{exp.end_date}}</span></div>
                    </div>
                
                    <!-- Remove Button -->
                   

                    <div class="relative">
                      <button (click)="toggleMenu(i); $event.stopPropagation()" class="font-bold">
                        ‚ãØ
                      </button>
                  
                      <!-- Dropdown Menu -->
                      <div *ngIf="openedMenuIndex === i" class="absolute  mt-2 w-48 bg-white border rounded-lg shadow z-50"  (click)="$event.stopPropagation()"> 
                        <div class="p-2 hover:bg-gray-100 flex justify-between items-center">
                          <span class="text-sm text-gray-700">Hide from resume</span>
                          <label class="inline-flex items-center cursor-pointer ml-2">
                            <input type="checkbox" class="sr-only peer" >
                            <div class="w-9 h-5 bg-gray-200 rounded-full peer peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full relative"></div>
                          </label>
                        </div>
                        <div class="p-2 text-red-600 text-sm hover:bg-gray-100 cursor-pointer"
                             (click)="removeExperience(i); openedMenuIndex = null">
                          üóëÔ∏è Delete
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
              </div>
              
            </div>
          </div>

          <!-- Experience Form -->
          <div class="flex-1">
            <div class="bg-[#ffffff] p-8 rounded-md border border-[#d9dcf0]">
              <div class="flex "><h2 class="text-xl font-semibold mb-6">{{experiences[currentEducationIndex].title || 'Experience' +(currentExperienceIndex + 1 )}}</h2> <p class="font-semibold text-gray-600 relative top-1 text-md  ml-2" *ngIf="experiences[currentExperienceIndex].start_date">{{experiences[currentExperienceIndex].start_date}} - {{experiences[currentExperienceIndex].end_date}}</p></div>
              <div class="grid grid-cols-2 gap-6" *ngIf="experiences[currentExperienceIndex] as exp">
                <div class="col-span-2">
                  <label class="block text-sm mb-1">Quel √©tait votre <span class="font-bold">R√¥le</span>  chez {{exp.company || "l'entreprise"}}</label>
                  <input [(ngModel)]="experiences[currentExperienceIndex].title"
                    class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
                    placeholder="e.g. Software Developer">
                </div>
                <div class="col-span-2">
                  <label class="block text-sm mb-1">Pour quelle <span class="font-bold">entreprise</span> avez-vous travaill√© ?</label>
                  <input [(ngModel)]="experiences[currentExperienceIndex].company"
                    class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md" placeholder="e.g. Google">
                </div>
                <div>
                  <label class="block text-sm mb-1">date de d√©but</label>
                  <input type="month" [(ngModel)]="experiences[currentExperienceIndex].start_date"
                    class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md">
                </div>
                <div>
                  <label class="block text-sm mb-1">date de fin</label>
                  <input type="month" [(ngModel)]="experiences[currentExperienceIndex].end_date"
                    class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md">
                </div>
                <div class="col-span-2">
                  <label class="block text-sm mb-1"><span class="font-bold">O√π</span> √©tait situ√©e l'entreprise ?</label>
                  <input [(ngModel)]="experiences[currentExperienceIndex].location"
                    class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
                    placeholder="e.g. Paris, France">
                </div>
                <div class="col-span-2 relative">
                  <label class="block text-sm mb-1">
                    <span class="font-bold">Qu'as-tu fait</span> dans l'entreprise ?
                  </label>
                
                  <!-- Textarea -->
                  <textarea
                    rows="5"
                    [(ngModel)]="experiences[currentExperienceIndex].description"
                    placeholder="‚Ä¢ Organised and implemented Google Analytics data tracking campaigns..."
                    
                    class="w-full text-sm leading-6 bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md pr-28"
                  ></textarea>
                
                  <!-- Bottom info and button container -->
                  <div class="absolute bottom-4 left-3 flex items-center text-xs text-gray-500 gap-2 pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24"
                      stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z" />
                    </svg>
                    Aim for a balanced mix of descriptive and key number bullet points.
                  </div>
                
                  <!-- AI Writer Button (disabled) -->
                  <button disabled
                    class="absolute bottom-4 right-3 bg-gray-200 text-gray-400/50 text-xs font-semibold rounded-full px-3 py-1 cursor-not-allowed">
                    ‚ú® AI WRITER NOT READY
                  </button>
                </div>
                
              </div>
              <div class="mt-6 text-right">
                <button (click)="addExperience()"
                  class="px-6 py-3 rounded-md bg-[#8B5CF6] hover:bg-[#372464]  font-extrabold text-white text-xs  transition">SAVE TO EXPERIENCE
                  LIST</button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>


    <!-- Education Section -->
    <section *ngIf="currentSection === 'education'" class="py-10 transition-all duration-300 ease-in-out">
      <div class="flex gap-6">

        <!-- Left Sidebar -->
        <div class="w-64">
          <div class="bg-[#ffffff] rounded-2xl border border-[#d9dcf0]  p-4 space-y-4">
            <div class="text-center border-b border-[#d9dcf0] pb-4">
              <div class="text-2xl font-bold text-[#8B5CF6]">0</div>
              <div class="text-xs text-[#B0B3C7]">Your Rezi Score</div>
              <div class="text-[11px] text-[#999CA7]">Needs improvement</div>
            </div>

            <div>
              <div class="flex justify-between items-center text-sm font-medium text-gray-600 mb-2">
                <span>Your Education</span>
                <button (click)="addEducation()" class="bg-[#8B5CF6] px-2 py-1 text-white rounded">+</button>
              </div>
            
              <div class="space-y-2">
                <div *ngFor="let edc of educations; let i = index"
                     class="flex justify-between items-center px-3 py-2 rounded-lg cursor-pointer"
                     [ngClass]="{
                       'bg-[#8B5CF6] text-white': currentEducationIndex === i,
                       'bg-[#ffffff] text-gray-900 hover:bg-[#f1f2f8]': currentEducationIndex !== i
                     }">
              
                  <!-- Experience Content Click (Select) -->
                  <div (click)="selectEducation(i)" class="flex-1">
                    <div class="text-sm font-medium">{{ edc.degree  || 'Experience ' + (i + 1) }}</div>
                    <div class="text-xs">{{ edc.school || 'details' }}<span *ngIf="edc.start_date">, {{edc.start_date}} - {{edc.end_date}}</span></div>
                  </div>
              
                  <!-- Remove Button -->
                 

                  <div class="relative">
                    <button (click)="toggleMenu(i); $event.stopPropagation()" class="font-bold">
                      ‚ãØ
                    </button>
                
                    <!-- Dropdown Menu -->
                    <div *ngIf="openedMenuIndex === i" class="absolute  mt-2 w-48 bg-white border rounded-lg shadow z-50"  (click)="$event.stopPropagation()"> 
                      <div class="p-2 hover:bg-gray-100 flex justify-between items-center">
                        <span class="text-sm text-gray-700">Hide from resume</span>
                        <label class="inline-flex items-center cursor-pointer ml-2">
                          <input type="checkbox" class="sr-only peer" >
                          <div class="w-9 h-5 bg-gray-200 rounded-full peer peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full relative"></div>
                        </label>
                      </div>
                      <div class="p-2 text-red-600 text-sm hover:bg-gray-100 cursor-pointer"
                           (click)="removeEducation(i); openedMenuIndex = null">
                        üóëÔ∏è Delete
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
            </div>
            
          </div>
        </div>

        <!-- Experience Form -->
        <div class="flex-1">
          <div class="bg-[#ffffff] p-8 rounded-md border border-[#d9dcf0]">
            <div class="flex "><h2 class="text-xl font-semibold mb-6">{{educations[currentEducationIndex].school}}</h2> <p class="font-semibold text-gray-600 relative top-1 text-md  ml-2" *ngIf="educations[currentEducationIndex].start_date">{{educations[currentEducationIndex].start_date}} - {{educations[currentEducationIndex].end_date}}</p></div>
            <div class="grid grid-cols-2 gap-6" *ngIf="educations[currentEducationIndex] as exp">
              <div class="col-span-2">
                <label class="block text-sm mb-1">Quel est votre <span class="font-bold">dipl√¥me</span>  ou autre qualification et sp√©cialit√© ?</label>
                <input [(ngModel)]="educations[currentEducationIndex].degree"
                  class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
                  placeholder="e.g. Software Developer">
              </div>
              <div class="col-span-2">
                <label class="block text-sm mb-1">O√π avez-vous <span class="font-bold">obtenu</span> votre dipl√¥me/qualification ?</label>
                <input [(ngModel)]="educations[currentEducationIndex].school"
                  class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md" placeholder="e.g. Google">
              </div>
              <div>
                <label class="block text-sm mb-1">date de d√©but</label>
                <input type="month" [(ngModel)]="educations[currentEducationIndex].start_date"
                  class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md">
              </div>
              <div>
                <label class="block text-sm mb-1">date de fin</label>
                <input type="month" [(ngModel)]="educations[currentEducationIndex].end_date"
                  class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md">
              </div>
              <div class="col-span-2">
                <label class="block text-sm mb-1">quelle <span class="font-bold">branche</span> as-tu ?</label>
                <input [(ngModel)]="educations[currentEducationIndex].branch"
                  class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
                  placeholder="e.g. Paris, France">
              </div>
             
              
            </div>
            <div class="mt-6 text-right">
              <button (click)="addEducation()"
                class="px-6 py-3 rounded-md bg-[#8B5CF6] hover:bg-[#372464] uppercase  font-extrabold text-white text-xs  transition">SAVE TO Education
                LIST</button>
            </div>
          </div>
        </div>
      </div>

    </section>

    <!-- Skills Section -->
    <section *ngIf="currentSection === 'skills'" class="py-10 transition-all duration-300 ease-in-out">
      <div class="bg-[#ffffff] p-8 rounded-md border border-[#d9dcf0]">
        <label class="block text-sm mb-2">Entrez <span class="font-bold">les comp√©tences</span> que vous poss√©dez ?</label>

        <input type="text" [(ngModel)]="newSkill" (keydown.enter)="addSkill()"
          class="w-full bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
          placeholder="Press Enter to add skill (e.g. Angular)" />

        <div class="flex flex-wrap gap-2 mb-4 mt-2">
          <span *ngFor="let skill of skills; let i = index"
            class="bg-[#8B5CF6] text-white px-3 py-1 rounded-full text-sm flex items-center gap-1 animate-fadeIn">
            {{ skill }}
            <button (click)="removeSkill(i)" class="text-white hover:text-red-300">‚úï</button>
          </span>
        </div>


      </div>
    </section>


    <!-- Summary Section -->
    <section *ngIf="currentSection === 'summary'" class="py-10 transition-all duration-300 ease-in-out">
      <div class="bg-[#ffffff] p-8 rounded-md border border-[#d9dcf0]">
        <label class="block text-sm mb-2">R√©diger <span class="font-bold">une synth√®se</span> professionnelle</label>
        <textarea [(ngModel)]="summary" rows="5"
          class="w-full  bg-[#ffffff] border-[#d9dcf0]  focus:border-[#8B5CF6] border-2 outline-none  px-4 py-3 rounded-md"
          placeholder="R√©diger une synth√®se professionnelle"></textarea>
      </div>
    </section>


   
  </div>
</div>